<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibe Rush | Правила Сервера</title>
    <meta name="description" content="Актуальный свод правил сервера Vibe Rush. Ознакомьтесь во избежание бана.">
    <meta name="theme-color" content="#030305">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Jost:wght@500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="https://90f1661d-2ff4-4f29-b07c-0e47453ca691.selstorage.ru/site931690/63398923-e702-4556-9e03-8d52243a3297/63398923-e702-4556-9e03-8d52243a3297-13789880.png">

    <style>
        .rules-loader {
            text-align: center;
            padding: 40px;
            font-size: 1.2rem;
            color: var(--accent);
            animation: pulse 1.5s infinite;
        }
        .rule-block {
            margin-bottom: 50px;
            animation: fadeIn 0.5s ease forwards;
            opacity: 0;
        }
        .rule-block h2 {
            font-size: 2rem;
            color: var(--accent);
            margin-bottom: 25px;
            border-left: 4px solid var(--accent);
            padding-left: 15px;
        }
        .subcategory-block {
            margin: 25px 0 15px 10px;
        }
        .subcategory-block h3 {
            font-size: 1.3rem;
            color: #fff;
            margin-bottom: 15px;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .rule-list {
            list-style: none;
            padding: 0;
        }
        .rule-item {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 14px 18px;
            margin-bottom: 10px;
            border-radius: 10px;
            transition: 0.3s var(--ease);
            font-size: 0.95rem;
            color: var(--text-muted);
            line-height: 1.6;
        }
        .rule-item:hover {
            background: rgba(255, 255, 255, 0.07);
            border-color: var(--accent);
            color: #fff;
            transform: translateX(8px);
        }
        .rule-number {
            color: var(--accent);
            font-weight: 800;
            margin-right: 10px;
            font-family: var(--font-head);
        }
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }
    </style>
</head>
<body>

    <header>
        <div class="container nav-wrapper">
            <a href="index.html" class="logo">
                <img src="https://90f1661d-2ff4-4f29-b07c-0e47453ca691.selstorage.ru/site931690/c627bfd3-f6de-41b4-939a-6abc2188184f/c627bfd3-f6de-41b4-939a-6abc2188184f-13792320.png" alt="Vibe Rush">
                <span>VIBE RUSH</span>
            </a>
            
            <nav class="nav-links" id="navLinks">
                <a href="index.html" class="nav-link">Главная</a>
                <a href="https://viberush.tilda.ws" class="nav-link">Магазин</a>
                <a href="pravila.html" class="nav-link active">Правила</a>
                <a href="wiki.html" class="nav-link">Wiki</a>
                <a href="https://discord.gg/JB368EmZmq" target="_blank" class="nav-link">Discord</a>
            </nav>

            <div class="burger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </header>

    <section class="page-header">
        <div class="container">
            <h1 class="page-title">ПРАВИЛА СЕРВЕРА</h1>
            <p class="section-subtitle">Официальный регламент проекта Vibe Rush 2026</p>
        </div>
    </section>

    <main class="container">
        <div class="text-content" id="rulesContainer">
            <div class="rules-loader">Загрузка защищенного архива правил...</div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="logo">
                    <img src="https://90f1661d-2ff4-4f29-b07c-0e47453ca691.selstorage.ru/site931690/b8ccdd8f-e1a5-42bb-8ffb-72065970d99d/b8ccdd8f-e1a5-42bb-8ffb-72065970d99d-13792321.png" alt="Logo">
                    <span>VIBE RUSH</span>
                </div>
                <div class="footer-links">
                    <a href="pravila.html" style="color: var(--primary);">Правила</a>
                    <a href="privacy-policy.html">Политика конфиденциальности</a>
                    <a href="wiki.html">Wiki</a>
                    <a href="https://viberush.tilda.ws">Магазин</a>
                </div>
            </div>
            <div class="copyright">
                &copy; 2026 Vibe Rush Server. Not affiliated with Mojang AB.
            </div>
        </div>
    </footer>

    <script>
        function toggleMenu() {
            const nav = document.getElementById('navLinks');
            nav.classList.toggle('active');
        }

        function createRulesList(rulesArray) {
            const list = document.createElement('ul');
            list.className = 'rule-list';
            
            rulesArray.forEach(ruleText => {
                const item = document.createElement('li');
                item.className = 'rule-item';
                
                const numberMatch = ruleText.match(/^(\d+(\.\d+)*)/);
                if (numberMatch) {
                    const num = numberMatch[0];
                    const content = ruleText.substring(num.length);
                    item.innerHTML = `<span class="rule-number">${num}</span>${content}`;
                } else {
                    item.innerText = ruleText;
                }
                list.appendChild(item);
            });
            return list;
        }

        document.addEventListener('DOMContentLoaded', async () => {
            const container = document.getElementById('rulesContainer');
            
            try {
                const response = await fetch('rules.json');
                if (!response.ok) throw new Error('Ошибка сети');
                
                const data = await response.json();
                container.innerHTML = '';

                if(data.meta) {
                    const info = document.createElement('div');
                    info.style.cssText = 'margin-bottom: 40px; padding: 15px; background: rgba(45,152,218,0.1); border-radius: 12px; font-size: 0.9rem; border-left: 3px solid var(--primary); color: #fff;';
                    info.innerHTML = `Последнее обновление: ${data.meta.lastUpdated}`;
                    container.appendChild(info);
                }

                data.categories.forEach((cat, idx) => {
                    const block = document.createElement('div');
                    block.className = 'rule-block';
                    block.style.animationDelay = `${idx * 0.1}s`;

                    const title = document.createElement('h2');
                    title.innerText = cat.title;
                    block.appendChild(title);

                    if (cat.rules) {
                        block.appendChild(createRulesList(cat.rules));
                    }

                    if (cat.subcategories) {
                        cat.subcategories.forEach(sub => {
                            const subBlock = document.createElement('div');
                            subBlock.className = 'subcategory-block';
                            
                            const subTitle = document.createElement('h3');
                            subTitle.innerText = sub.name;
                            subBlock.appendChild(subTitle);
                            
                            subBlock.appendChild(createRulesList(sub.rules));
                            block.appendChild(subBlock);
                        });
                    }

                    container.appendChild(block);
                });

            } catch (err) {
                container.innerHTML = `
                    <div style="text-align:center; padding: 40px; background: rgba(255,71,87,0.1); border-radius: 20px; border: 1px solid var(--danger);">
                        <h3 style="color: var(--danger); margin-bottom: 10px;">ОШИБКА ДОСТУПА</h3>
                        <p style="color: #fff; opacity: 0.8;">CORS-блокировка. Сайт не может прочитать rules.json при локальном открытии.</p>
                        <p style="margin-top: 20px; font-size: 0.9rem; color: var(--accent);">РЕШЕНИЕ: Выгрузите проект на GitHub Pages.</p>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>